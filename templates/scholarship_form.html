{% extends "base.html" %}
{% block content %}

{% if session.get("role") != "admin" %}
    <h3 style="color:red;">Unauthorized Access</h3>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Go Back</a>

{% else %}

<div class="form-card">
    <h2>Student Scholarship</h2>

    {% if student %}
        <h3>{{ student[1] }} - {{ student[2] }}</h3>
        
        <form method="POST" novalidate>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Scholarship Type</label>
                    <select name="scholarship_type" required>
                        <option value="">-- Select Type --</option>
                        <option value="merit">Merit-Based</option>
                        <option value="need">Need-Based</option>
                        <option value="minority">Minority</option>
                        <option value="sports">Sports</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Scholarship Amount (₹)</label>
                    <input
                        type="number"
                        name="amount"
                        required
                        min="0"
                        step="0.01"
                        placeholder="Enter amount"
                    >
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Start Date</label>
                    <input
                        type="date"
                        name="start_date"
                        required
                    >
                </div>

                <div class="form-group">
                    <label>End Date</label>
                    <input
                        type="date"
                        name="end_date"
                        required
                    >
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Provider/Organization</label>
                    <input
                        type="text"
                        name="provider"
                        placeholder="Name of organization providing scholarship"
                    >
                </div>

                <div class="form-group">
                    <label>Status</label>
                    <select name="status" required>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="suspended">Suspended</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Remarks</label>
                <textarea name="remarks" rows="3" placeholder="Additional remarks about the scholarship"></textarea>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Save Scholarship</button>
                <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>

        <h3 style="margin-top: 30px;">Scholarship History</h3>
        {% if scholarship_history %}
        <table border="1" style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background-color: #f5f5f5;">
                    <th>Type</th>
                    <th>Amount</th>
                    <th>Period</th>
                    <th>Provider</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for scholarship in scholarship_history %}
                <tr>
                    <td>{{ scholarship[1] }}</td>
                    <td>₹{{ scholarship[2] }}</td>
                    <td>{{ scholarship[3] }} to {{ scholarship[4] }}</td>
                    <td>{{ scholarship[5] }}</td>
                    <td>{{ scholarship[6] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No scholarship history available.</p>
        {% endif %}

    {% else %}
        <p style="color: red;">Student not found.</p>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Go Back</a>
    {% endif %}
</div>

{% endif %}

{% endblock %}
