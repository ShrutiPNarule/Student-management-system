{% extends "base.html" %}
{% block content %}

{% if session.get("role") not in ["admin", "auditor", "superadmin", "clerk"] %}
    <h3 style="color:red;">Unauthorized Access</h3>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Go Back</a>

{% else %}

<div class="form-card">
    <h2>Student Profile</h2>

    {% if student %}
        <div class="student-info">
            <h3>{{ student[1] }}</h3>
            
            <div class="info-row">
                <div class="info-item">
                    <strong>Roll Number:</strong> {{ student[2] }}
                </div>
                <div class="info-item">
                    <strong>Email:</strong> {{ student[5] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>Phone:</strong> {{ student[4] }}
                </div>
                <div class="info-item">
                    <strong>College:</strong> {{ student[6] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>Address:</strong> {{ student[3] }}
                </div>
                <div class="info-item">
                    <strong>Category:</strong> {{ student[7] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>Date of Birth:</strong> {{ student[8] }}
                </div>
                <div class="info-item">
                    <strong>Status:</strong> {{ student[9] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>GPA:</strong> {{ student[16] }}
                </div>
                <div class="info-item">
                    <strong>Created:</strong> {{ student[17] }}
                </div>
            </div>

            <h3 style="margin-top: 30px;">Academic Details</h3>
            <div class="info-row">
                <div class="info-item">
                    <strong>10th Marks:</strong> {{ student[10] }}
                </div>
                <div class="info-item">
                    <strong>12th Marks:</strong> {{ student[11] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>Semester 1 Marks:</strong> {{ student[12] }}
                </div>
                <div class="info-item">
                    <strong>Semester 2 Marks:</strong> {{ student[13] }}
                </div>
            </div>

            <div class="info-row">
                <div class="info-item">
                    <strong>Semester 3 Marks:</strong> {{ student[14] }}
                </div>
                <div class="info-item">
                    <strong>Semester 4 Marks:</strong> {{ student[15] }}
                </div>
            </div>

            <h3 style="margin-top: 30px;">Action History</h3>
            {% if actions %}
            <table border="1" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #f5f5f5;">
                        <th>Action</th>
                        <th>Date</th>
                        <th>By</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for action in actions %}
                    <tr>
                        <td>{{ action[1] }}</td>
                        <td>{{ action[3] }}</td>
                        <td>{{ action[2] }}</td>
                        <td>{{ action[4] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p style="color: #666;">No action history available.</p>
            {% endif %}

            <div class="form-actions" style="margin-top: 30px;">
                {% if session.get("role") == "admin" %}
                    <a href="{{ url_for('update_student_data', student_id=student[0]) }}" class="btn btn-primary">Edit Student</a>
                {% endif %}
                <a href="{{ url_for('index') }}" class="btn btn-secondary">Go Back</a>
            </div>
        </div>
    {% else %}
        <p style="color: red;">Student not found.</p>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Go Back</a>
    {% endif %}
</div>

<style>
.student-info {
    background: #f9f9f9;
    padding: 20px;
    border-radius: 8px;
}

.info-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 15px;
}

.info-item {
    padding: 10px;
    background: white;
    border-radius: 4px;
    border-left: 4px solid #007bff;
}

.info-item strong {
    display: block;
    color: #007bff;
    margin-bottom: 5px;
}
</style>

{% endif %}

{% endblock %}
