{% extends "base.html" %}
{% block content %}

<div class="form-card">
    <h2>Change Password</h2>

    {% if session.get("user_email") %}
        <form method="POST" novalidate>
            
            <div class="form-group">
                <label>Current Password</label>
                <input
                    type="password"
                    name="current_password"
                    required
                    minlength="8"
                    maxlength="128"
                    placeholder="Enter your current password"
                    title="Password is required"
                >
            </div>

            <div class="form-group">
                <label>New Password</label>
                <input
                    type="password"
                    name="new_password"
                    required
                    minlength="8"
                    maxlength="128"
                    placeholder="Enter your new password"
                    title="Password must be at least 8 characters"
                >
                <small>Password must contain at least 8 characters with uppercase, lowercase, number, and special character.</small>
            </div>

            <div class="form-group">
                <label>Confirm New Password</label>
                <input
                    type="password"
                    name="confirm_password"
                    required
                    minlength="8"
                    maxlength="128"
                    placeholder="Confirm your new password"
                    title="Passwords must match"
                >
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Change Password</button>
                <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    {% else %}
        <p style="color: red;">You must be logged in to change your password.</p>
        <a href="{{ url_for('login') }}" class="btn btn-primary">Go to Login</a>
    {% endif %}
</div>

{% endblock %}
